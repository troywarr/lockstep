!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.Lockstep=t()}}(function(){return function t(n,i,e){function o(r,a){if(!i[r]){if(!n[r]){var u="function"==typeof require&&require;if(!a&&u)return u(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+r+"'")}var l=i[r]={exports:{}};n[r][0].call(l.exports,function(t){var i=n[r][1][t];return o(i?i:t)},l,l.exports,t,n,i,e)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<e.length;r++)o(e[r]);return o}({1:[function(t,n){function i(){}var e=n.exports={};e.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(n){var i=[];return window.addEventListener("message",function(t){var n=t.source;if((n===window||null===n)&&"process-tick"===t.data&&(t.stopPropagation(),i.length>0)){var e=i.shift();e()}},!0),function(t){i.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),e.title="browser",e.browser=!0,e.env={},e.argv=[],e.on=i,e.addListener=i,e.once=i,e.off=i,e.removeListener=i,e.removeAllListeners=i,e.emit=i,e.binding=function(){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(){throw new Error("process.chdir is not supported")}},{}],2:[function(t,n){(function(t){(function(){var i,e,o;"undefined"!=typeof performance&&null!==performance&&performance.now?n.exports=function(){return performance.now()}:"undefined"!=typeof t&&null!==t&&t.hrtime?(n.exports=function(){return(i()-o)/1e6},e=t.hrtime,i=function(){var t;return t=e(),1e9*t[0]+t[1]},o=i()):Date.now?(n.exports=function(){return Date.now()-o},o=Date.now()):(n.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(this,t("1YiZ5S"))},{"1YiZ5S":1}],3:[function(t,n){for(var i=t("performance-now"),e="undefined"==typeof window?{}:window,o=["moz","webkit"],s="AnimationFrame",r=e["request"+s],a=e["cancel"+s]||e["cancelRequest"+s],u=!0,l=0;l<o.length&&!r;l++)r=e[o[l]+"Request"+s],a=e[o[l]+"Cancel"+s]||e[o[l]+"CancelRequest"+s];if(!r||!a){u=!1;var c=0,d=0,f=[],p=1e3/60;r=function(t){if(0===f.length){var n=i(),e=Math.max(0,p-(n-c));c=e+n,setTimeout(function(){var t=f.slice(0);f.length=0;for(var n=0;n<t.length;n++)if(!t[n].cancelled)try{t[n].callback(c)}catch(i){setTimeout(function(){throw i},0)}},Math.round(e))}return f.push({handle:++d,callback:t,cancelled:!1}),d},a=function(t){for(var n=0;n<f.length;n++)f[n].handle===t&&(f[n].cancelled=!0)}}n.exports=function(t){return u?r.call(e,function(){try{t.apply(this,arguments)}catch(n){setTimeout(function(){throw n},0)}}):r.call(e,t)},n.exports.cancel=function(){a.apply(e,arguments)}},{"performance-now":4}],4:[function(t,n){(function(t){(function(){var i,e,o;"undefined"!=typeof performance&&null!==performance&&performance.now?n.exports=function(){return performance.now()}:"undefined"!=typeof t&&null!==t&&t.hrtime?(n.exports=function(){return(i()-o)/1e6},e=t.hrtime,i=function(){var t;return t=e(),1e9*t[0]+t[1]},o=i()):Date.now?(n.exports=function(){return Date.now()-o},o=Date.now()):(n.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(this,t("1YiZ5S"))},{"1YiZ5S":1}],5:[function(t,n){(function(i){(function(){var e,o,s,r,a,u,l,c,d,f,p,h=function(t,n){return function(){return t.apply(n,arguments)}},m={}.hasOwnProperty,g=[].indexOf||function(t){for(var n=0,i=this.length;i>n;n++)if(n in this&&this[n]===t)return n;return-1};p=t("raf"),f=t("performance-now"),l={},l.microseconds=.001,l.milliseconds=1e3*l.microseconds,l.seconds=1e3*l.milliseconds,l.minutes=60*l.seconds,l.hours=60*l.minutes,l.days=24*l.hours,u=["microseconds","milliseconds","seconds","minutes","hours","days"],d=["elapsed","clock"],o=["start","stop","reset"],r=["elapsed","clock","count"],e=["when","every","while","during","beginning","ending"],s={noArguments:"No arguments supplied.",options:{bad:{oneArgument:"Argument supplied is not a callback function or options object.",twoArguments:"Arguments supplied are not a callback function followed by an options object."},step:{missing:'Options supplied are incomplete (no valid "step" function).',redundant:'Options supplied are invalid (redundant "step" function).'},pad:{bad:'Options supplied are invalid ("pad" option must have a false or integer value).'}},callback:{bad:"Callback supplied is not a function.",missing:"No callback supplied."},startCallback:{bad:"Start callback is not a function.",missing:"No start callback supplied."},endCallback:{bad:"End callback is not a function.",missing:"No end callback supplied."},time:{bad:"Time supplied is not valid."},startTime:{bad:"Start time supplied is not valid."},endTime:{bad:"End time supplied is not valid.",missing:"No end time supplied."},info:{bad:"Info supplied is not valid."},condition:{bad:"Condition callback is not a function.",missing:"No condition callback supplied."},executionQty:{bad:"Execution quantity supplied is not an integer or Infinity.",missing:"No execution quantity supplied."}},c=function(){},a=function(){function t(){this._loop=h(this._loop,this);var t;t=this._validateOptions(arguments),this.settings=this._buildSettings(t),this.running=!1,this.microseconds=this._hasHighResolutionTime(),this.count={start:0,stop:0,reset:0},this.time={running:0,stored:0,last:{start:null,stop:null,reset:null}},this.callbacks=[]}return t.prototype._merge=function(t,n){var i,e;e={};for(i in t)e[i]=t[i];for(i in n)e[i]=n[i];return e},t.prototype._pad=function(t,n){return t+="",t.length>=n?t:""+new Array(n-t.length+1).join("0")+t},t.prototype._type=function(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},t.prototype._isInt=function(t){return!isNaN(t)&&parseInt(Number(t))===t&&!isNaN(parseInt(t,10))},t.prototype._isInf=function(t){return t===Number.POSITIVE_INFINITY},t.prototype._isEmpty=function(t){var n;for(n in t)if(m.call(t,n))return!1;return!0},t.prototype._hasHighResolutionTime=function(){var t;return null!=("undefined"!=typeof window&&null!==window&&null!=(t=window.performance)?t.now:void 0)||null!=("undefined"!=typeof i&&null!==i?i.hrtime:void 0)},t.prototype._isValidTime=function(t){var n,i,e,o,s;if("object"===!this._type(t))return!1;e=!1;for(n in t){if(o=t[n],e)return!1;if(e=!0,!(g.call(d,n)>=0&&"object"===this._type(o)))return!1;for(i in o)if(s=o[i],!(g.call(u,i)>=0&&"number"===this._type(s)))return!1}return!0},t.prototype._isValidCount=function(t){var n,i;for(n in t)if(i=t[n],!(g.call(o,n)>=0&&this._isInt(i)))return!1;return!0},t.prototype._isValidInfo=function(t){var n,i,e;i={};for(n in t)if(e=t[n],g.call(d,n)>=0)i[n]=e;else{if("count"!==n)return!1;if(!this._isValidCount(e))return!1}return this._isEmpty(i)||this._isValidTime(i)?!0:!1},t.prototype._validateOptions=function(t){var n;if(0===t.length)throw new Error(s.noArguments);if(1===t.length)if("function"===this._type(t[0]))n={step:t[0]};else{if("object"!==this._type(t[0]))throw new Error(s.options.bad.oneArgument);if("function"!==this._type(t[0].step))throw new Error(s.options.step.missing);n=t[0]}else if(t.length>=2){if("object"!==this._type(t[0])||"function"!==this._type(t[1]))throw new Error(s.options.bad.twoArguments);if(null!=t[0].step)throw new Error(s.options.step.redundant);t[0].step=t[1],n=t[0]}if(null!=n.pad&&n.pad!==!1&&!this._isInt(n.pad))throw new Error(s.options.pad.bad);return n},t.prototype._validateArguments=function(t){var n,i,e,o,s,r,a;for(r=0,a=t.length;a>r;r++)if(n=t[r],s=n[0],o=n[1],i=n[2],e=n[3],null!=s){if("function"===this._type(o)){if(!o(s))throw new Error(i)}else if("string"===this._type(o))switch(o){case"time":if(!this._isValidTime(s))throw new Error(i);break;case"info":if(!this._isValidInfo(s))throw new Error(i);break;case"count":if(!this._isValidCount(s))throw new Error(i);break;case"executionQty":if(!this._isInt(s)&&!this._isInf(s))throw new Error(i);break;default:if(this._type(s)!==o)throw new Error(i)}}else if(null!=e)throw new Error(e)},t.prototype._buildSettings=function(t){var n;return n={pad:!1,floor:!1},this._merge(n,t)},t.prototype._fireCallbacks=function(t){var n,i,e,o,s,r;for(s=this.callbacks,r=[],n=e=0,o=s.length;o>e;n=++e)i=s[n],i.called++,i.condition(t,i.called)?(i.callback(t),r.push(i.passed++)):r.push(i.failed++);return r},t.prototype._runningTimeToElapsedTime=function(t){var n,i;return n={},this.microseconds?(n.microseconds=t/l.microseconds,i=t):i=t,n.milliseconds=i,n.seconds=i/l.seconds,n.minutes=i/l.minutes,n.hours=i/l.hours,n.days=i/l.days,n},t.prototype._runningTimeToClockTime=function(t){var n,i;return n={},this.microseconds?(n.microseconds=Math.floor(t%1/l.microseconds),i=Math.floor(t)):i=t,n.milliseconds=i%1e3,n.seconds=Math.floor(i/l.seconds)%60,n.minutes=Math.floor(i/l.minutes)%60,n.hours=Math.floor(i/l.hours)%24,n.days=Math.floor(i/l.days),n},t.prototype._elapsedTimeToRunningTime=function(t){var n,i,e;i=0;for(n in t)e=t[n],i=l[n]*e;return i},t.prototype._clockTimeToRunningTime=function(t){var n,i,e;i=0;for(n in t)e=t[n],i+=l[n]*e;return i},t.prototype._toRunningTime=function(t){return null!=t.elapsed?this._elapsedTimeToRunningTime(t.elapsed):null!=t.clock?this._clockTimeToRunningTime(t.clock):void 0},t.prototype._getInfo=function(){var t,n,i,e,o;if(e=this.time.stored+this.time.running,n=this._runningTimeToElapsedTime(e),t=this._runningTimeToClockTime(e),this.settings.floor)for(i in n)o=n[i],n=Math.floor(o);if(this.settings.pad)for(i in t)o=t[i],o=this._pad(o,this.settings.pad);return{time:{elapsed:n,clock:t},count:this.count}},t.prototype._adjustTime=function(t,n){var i;switch(i=f(),this.time.last.start=i,this.time.running=0,t){case"set":this.time.stored=n;break;case"add":this.time.stored+=n;break;case"subtract":this.time.stored-=n}return this.settings.allowNegative?void 0:this.time.stored=Math.max(this.time.stored,0)},t.prototype._adjustCount=function(t,n){var i,e;for(i in n){switch(e=n[i],t){case"set":this.count[i]=e;break;case"add":this.count[i]+=e;break;case"subtract":this.count[i]-=e}this.settings.allowNegative||(this.count[i]=Math.max(this.count[i],0))}},t.prototype._adjustInfo=function(t,n){return null!=n.elapsed&&this._adjustTime(t,this._elapsedTimeToRunningTime(n.elapsed)),null!=n.clock&&this._adjustTime(t,this._clockTimeToRunningTime(n.clock)),null!=n.count?this._adjustCount(t,n.count):void 0},t.prototype._loop=function(){return this.pulse=p(this._loop),this._step()},t.prototype._step=function(t){var n;return null==t&&(t=f()),this.time.running=t-this.time.last.start,n=this._getInfo(),this.settings.step(n),this._fireCallbacks(n)},t.prototype.registerCallback=function(t,n){return this._validateArguments([[t,"function",s.condition.bad,s.condition.missing],[n,"function",s.callback.bad,s.callback.missing]]),this.callbacks.push({meta:{called:0,passed:0,failed:0},condition:t,callback:n})},t.prototype.start=function(t){var n;return null==t&&(t=this.settings.start),n=f(),this._validateArguments([[t,"function",s.callback.bad]]),this.running||(this.count.start++,this.running=!0,this.time.last.start=n,this._loop(),"function"==typeof t&&t(this._getInfo())),this},t.prototype.stop=function(t){var n;return null==t&&(t=this.settings.stop),n=f(),this._validateArguments([[t,"function",s.callback.bad]]),this.running&&(p.cancel(this.pulse),this.count.stop++,this.running=!1,this.time.last.stop=n,this._step(n),this.time.stored+=this.time.running,this.time.running=0,"function"==typeof t&&t(this._getInfo())),this},t.prototype.reset=function(t,n){var i,e,o,r,a;if(null==t&&(t=this.settings.reset),e=f(),this._validateArguments([[t,"function",s.callback.bad]]),(this.time.running>0||this.time.stored>0)&&(i=!0,this.time.running=this.time.stored=0,this.count.reset++,this.time.last.reset=this.time.last.start=e,this.time.last.stop=null),n){a=this.count;for(o in a)if(r=a[o],r>0){i=!0,this.count.start=0,this.count.stop=0,this.count.reset=0;break}}return i&&("function"==typeof t?t(this._getInfo()):void 0),this},t.prototype.info=function(t,n){return null==n&&(n=this.settings.info),null!=t?(this._validateArguments([[t,"info",s.info.bad,s.noArguments],[n,"function",s.callback.bad]]),this._adjustInfo("set",t),"function"==typeof n&&n(this._getInfo()),this):this._getInfo()},t.prototype.add=function(t,n){return null==n&&(n=this.settings.add),this._validateArguments([[t,"info",s.info.bad,s.noArguments],[n,"function",s.callback.bad]]),this._adjustInfo("add",t),"function"==typeof n&&n(this._getInfo()),this},t.prototype.subtract=function(t,n){return null==n&&(n=this.settings.subtract),this._validateArguments([[t,"info",s.info.bad,s.noArguments],[n,"function",s.callback.bad]]),this._adjustInfo("subtract",t),"function"==typeof n&&n(this._getInfo()),this},t.prototype.when=function(t,n){return null==n&&(n=this.settings.when),this._validateArguments([[t,"time",s.time.bad,s.noArguments],[n,"function",s.callback.bad,s.callback.missing]]),this.registerCallback(function(n){return function(i,e){return 0===e.passed&&n._elapsedTimeToRunningTime(i.time.elapsed)>=n._toRunningTime(t)}}(this),n),this},t.prototype.every=function(t,n){return null==n&&(n=this.settings.every),this._validateArguments([[t,"time",s.time.bad,s.noArguments],[n,"function",s.callback.bad,s.callback.missing]]),this},t.prototype["while"]=function(t,n,i){return null==i&&(i=this.settings["while"]),this._validateArguments([[t,"time",s.startTime.bad,s.noArguments],[n,"time",s.endTime.bad,s.endTime.missing],[i,"function",s.callback.bad,s.callback.missing]]),this.registerCallback(function(i){return function(e){var o;return i._toRunningTime(t)<=(o=i._elapsedTimeToRunningTime(e.time.elapsed))&&o<=i._toRunningTime(n)}}(this),i),this},t.prototype.during=function(t,n,i,e){return null==i&&(i=this.settings.duringStart),null==e&&(e=this.settings.duringEnd),this._validateArguments([[t,"time",s.startTime.bad,s.noArguments],[n,"time",s.endTime.bad,s.endTime.missing],[i,"function",s.startCallback.bad,s.startCallback.missing],[e,"function",s.endCallback.bad,s.endCallback.missing]]),this},t.prototype.beginning=function(t,n){return null==n&&(n=this.settings.beginning),this._validateArguments([[t,"time",s.startTime.bad,s.noArguments],[n,"function",s.startCallback.bad,s.startCallback.missing]]),this.during(t,1/0,n,c),this},t.prototype.ending=function(t,n){return null==n&&(n=this.settings.ending),this._validateArguments([[t,"time",s.time.bad,s.noArguments],[n,"function",s.endCallback.bad,s.endCallback.missing]]),this},t}(),n.exports=a}).call(this)}).call(this,t("1YiZ5S"))},{"1YiZ5S":1,"performance-now":2,raf:3}]},{},[5])(5)});