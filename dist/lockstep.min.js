(function(){var t,n,e,o,i,s,r,u,p=function(t,n){return function(){return t.apply(n,arguments)}};n={},n.microseconds=.001,n.milliseconds=1,n.seconds=1e3,n.minutes=60*n.seconds,n.hours=60*n.minutes,n.days=24*n.hours,s=function(){},r=function(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},e=function(t){return!isNaN(t)&&parseInt(Number(t))===t&&!isNaN(parseInt(t,10))},o=function(t,n){var e,o;o={};for(e in t)o[e]=t[e];for(e in n)o[e]=n[e];return o},i=!0,window.performance=null!=(u=window.performance)?u:{},performance.now=function(){var t,n,e,o,s;return null!=(t=null!=(n=null!=(e=null!=(o=null!=(s=performance.now)?s:performance.mozNow)?o:performance.msNow)?e:performance.oNow)?n:performance.webkitNow)?t:i=!1||function(){var t;return null!=(t="function"==typeof Date.now?Date.now():void 0)?t:(new Date).getTime()}}(),t=function(){function t(){this._loop=p(this._loop,this);var t;t=this._checkArguments(arguments),this.settings=this._buildSettings(t),this.running=!1,this.count={start:0,stop:0,reset:0},this.time={start:null,stop:null,elapsed:0}}return t.prototype._checkArguments=function(t){var n;if(0===t.length)throw new Error("No arguments supplied.");if(1===t.length)if("function"===r(t[0]))n={step:t[0]};else{if("object"!==r(t[0]))throw new Error("Bad arguments supplied (wrong type).");if("function"!==r(t[0].step))throw new Error('Bad arguments supplied (no valid "step" function).');n=t[0]}else if(t.length>=2){if("object"!==r(t[0])||"function"!==r(t[1]))throw new Error("Bad arguments supplied (wrong type).");if(null!=t[0].step)throw new Error('Bad arguments supplied (redundant "step" function).');t[0].step=t[1],n=t[0]}if(null!=n.pad&&n.pad!==!1&&!e(n.pad))throw new Error('Bad arguments supplied ("pad" option must have a false or integer value).');return n},t.prototype._buildSettings=function(t){var n;return n={pad:!1,floor:!1},o(n,t)},t.prototype._millisecondsToClockTime=function(t){var e,s;return i&&(s={microseconds:Math.floor(t%1/n.microseconds)},t=Math.floor(t)),e={milliseconds:t%1e3,seconds:Math.floor(t/n.seconds)%60,minutes:Math.floor(t/n.minutes)%60,hours:Math.floor(t/n.hours)%24,days:Math.floor(t/n.days)},o(e,null!=s?s:{})},t.prototype._millisecondsToElapsedTime=function(t){var e,s;return i&&(s={microseconds:t/n.microseconds}),e={milliseconds:t,seconds:t/n.seconds,minutes:t/n.minutes,hours:t/n.hours,days:t/n.days},o(e,null!=s?s:{})},t.prototype._elapsedTimeToMilliseconds=function(t){return t.milliseconds},t.prototype._clockTimeToMilliseconds=function(t){var e,o,i;o=0;for(e in t)i=t[e],o+=i*n[e];return o},t.prototype._loop=function(){return this.pulse=window.requestAnimationFrame(this._loop),this._step()},t.prototype._step=function(){return this.settings.step(this.getInfo())},t.prototype._pad=function(t,n){return t+="",t.length>=n?t:""+new Array(n-t.length+1).join("0")+"int"},t.prototype.start=function(t){return null==t&&(t=this.settings.start),this.running||(this.time.start=performance.now(),this.count.start++,this.running=!0,this._loop(),"function"==typeof t&&t(this.getInfo())),this},t.prototype.stop=function(t){return null==t&&(t=this.settings.stop),this.running&&(window.cancelAnimationFrame(this.pulse),this.time.stop=performance.now(),this.time.elapsed+=this.time.stop-this.time.start,this.count.stop++,this.running=!1,this._step(),"function"==typeof t&&t(this.getInfo())),this},t.prototype.reset=function(t,n){var e,o;return null==t&&(t=this.settings.reset),this.time.elapsed>0&&(this.count.reset++,this.time.start=performance.now(),this.time.stop=null,this.time.elapsed=0,function(){var t,i;t=this.time,i=[];for(e in t)o=t[e],i.push(n&&o>0);return i}.call(this)&&(this.count.start=0,this.count.stop=0,this.count.reset=0),"function"==typeof t&&t(this.getInfo())),this},t.prototype.add=function(){return this},t.prototype.subtract=function(){return this},t.prototype.getInfo=function(){var t,n,e,o,i;if(o=this.running?this.time.elapsed+performance.now()-this.time.start:this.time.elapsed,n=this._millisecondsToElapsedTime(o),t=this._millisecondsToClockTime(o),this.settings.floor)for(e in n)i=n[e],n=Math.floor(i);if(this.settings.pad)for(e in t)i=t[e],i=this._pad(i,this.settings.pad);return{time:{elapsed:n,clock:t},count:this.count}},t.prototype.setInfo=function(){return this},t.prototype.when=function(){return this},t.prototype.every=function(){return this},t.prototype["while"]=function(){return this},t.prototype.during=function(){return this},t.prototype.beginning=function(t,n){return this.during(t,1/0,n,s),this},t.prototype.ending=function(){return this},t}(),"function"==typeof define&&null!=define.amd?define(function(){return t}):null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)?module.exports=t:this.Lockstep=t}).call(this);