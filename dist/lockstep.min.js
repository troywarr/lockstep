!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.Lockstep=t()}}(function(){return function t(n,e,r){function o(s,u){if(!e[s]){if(!n[s]){var l="function"==typeof require&&require;if(!u&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var a=e[s]={exports:{}};n[s][0].call(a.exports,function(t){var e=n[s][1][t];return o(e?e:t)},a,a.exports,t,n,e,r)}return e[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,n){function e(){}var r=n.exports={};r.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(n){var e=[];return window.addEventListener("message",function(t){var n=t.source;if((n===window||null===n)&&"process-tick"===t.data&&(t.stopPropagation(),e.length>0)){var r=e.shift();r()}},!0),function(t){e.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=e,r.addListener=e,r.once=e,r.off=e,r.removeListener=e,r.removeAllListeners=e,r.emit=e,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},{}],2:[function(t,n){(function(t){(function(){var e,r,o;"undefined"!=typeof performance&&null!==performance&&performance.now?n.exports=function(){return performance.now()}:"undefined"!=typeof t&&null!==t&&t.hrtime?(n.exports=function(){return(e()-o)/1e6},r=t.hrtime,e=function(){var t;return t=r(),1e9*t[0]+t[1]},o=e()):Date.now?(n.exports=function(){return Date.now()-o},o=Date.now()):(n.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(this,t("1YiZ5S"))},{"1YiZ5S":1}],3:[function(t,n){for(var e=t("performance-now"),r="undefined"==typeof window?{}:window,o=["moz","webkit"],i="AnimationFrame",s=r["request"+i],u=r["cancel"+i]||r["cancelRequest"+i],l=!0,a=0;a<o.length&&!s;a++)s=r[o[a]+"Request"+i],u=r[o[a]+"Cancel"+i]||r[o[a]+"CancelRequest"+i];if(!s||!u){l=!1;var p=0,c=0,f=[],h=1e3/60;s=function(t){if(0===f.length){var n=e(),r=Math.max(0,h-(n-p));p=r+n,setTimeout(function(){var t=f.slice(0);f.length=0;for(var n=0;n<t.length;n++)if(!t[n].cancelled)try{t[n].callback(p)}catch(e){setTimeout(function(){throw e},0)}},Math.round(r))}return f.push({handle:++c,callback:t,cancelled:!1}),c},u=function(t){for(var n=0;n<f.length;n++)f[n].handle===t&&(f[n].cancelled=!0)}}n.exports=function(t){return l?s.call(r,function(){try{t.apply(this,arguments)}catch(n){setTimeout(function(){throw n},0)}}):s.call(r,t)},n.exports.cancel=function(){u.apply(r,arguments)}},{"performance-now":4}],4:[function(t,n){(function(t){(function(){var e,r,o;"undefined"!=typeof performance&&null!==performance&&performance.now?n.exports=function(){return performance.now()}:"undefined"!=typeof t&&null!==t&&t.hrtime?(n.exports=function(){return(e()-o)/1e6},r=t.hrtime,e=function(){var t;return t=r(),1e9*t[0]+t[1]},o=e()):Date.now?(n.exports=function(){return Date.now()-o},o=Date.now()):(n.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(this,t("1YiZ5S"))},{"1YiZ5S":1}],5:[function(t,n){(function(e){(function(){var r,o,i,s,u,l,a=function(t,n){return function(){return t.apply(n,arguments)}},p=[].indexOf||function(t){for(var n=0,e=this.length;e>n;n++)if(n in this&&this[n]===t)return n;return-1};l=t("raf"),u=t("performance-now"),i={},i.microseconds=.001,i.milliseconds=1e3*i.microseconds,i.seconds=1e3*i.milliseconds,i.minutes=60*i.seconds,i.hours=60*i.minutes,i.days=24*i.hours,s=function(){},o=["microseconds","milliseconds","seconds","minutes","hours","days"],r=function(){function t(){this._loop=a(this._loop,this);var t;t=this._validateOptions(arguments),this.settings=this._buildSettings(t),this.running=!1,this.microseconds=this._hasHighResolutionTime(),this.count={start:0,stop:0,reset:0},this.time={start:null,stop:null,run:0}}return t.prototype._type=function(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},t.prototype._isInt=function(t){return!isNaN(t)&&parseInt(Number(t))===t&&!isNaN(parseInt(t,10))},t.prototype._merge=function(t,n){var e,r;r={};for(e in t)r[e]=t[e];for(e in n)r[e]=n[e];return r},t.prototype._pad=function(t,n){return t+="",t.length>=n?t:""+new Array(n-t.length+1).join("0")+t},t.prototype._hasHighResolutionTime=function(){var t;return null!=("undefined"!=typeof window&&null!==window&&null!=(t=window.performance)?t.now:void 0)||null!=("undefined"!=typeof e&&null!==e?e.hrtime:void 0)},t.prototype._validateOptions=function(t){var n;if(0===t.length)throw new Error("No arguments supplied.");if(1===t.length)if("function"===this._type(t[0]))n={step:t[0]};else{if("object"!==this._type(t[0]))throw new Error("Bad arguments supplied (wrong type).");if("function"!==this._type(t[0].step))throw new Error('Bad arguments supplied (no valid "step" function).');n=t[0]}else if(t.length>=2){if("object"!==this._type(t[0])||"function"!==this._type(t[1]))throw new Error("Bad arguments supplied (wrong type).");if(null!=t[0].step)throw new Error('Bad arguments supplied (redundant "step" function).');t[0].step=t[1],n=t[0]}if(null!=n.pad&&n.pad!==!1&&!this._isInt(n.pad))throw new Error('Bad arguments supplied ("pad" option must have a false or integer value).');return n},t.prototype._buildSettings=function(t){var n;return n={pad:!1,floor:!1},this._merge(n,t)},t.prototype._runTimeToClockTime=function(t){var n,e;return n={},this.microseconds?(n.microseconds=Math.floor(t%1/i.microseconds),e=Math.floor(t)):e=t,n.milliseconds=e%1e3,n.seconds=Math.floor(e/i.seconds)%60,n.minutes=Math.floor(e/i.minutes)%60,n.hours=Math.floor(e/i.hours)%24,n.days=Math.floor(e/i.days),n},t.prototype._runTimeToElapsedTime=function(t){var n,e;return n={},this.microseconds?(n.microseconds=t/i.microseconds,e=t):e=t,n.milliseconds=e,n.seconds=e/i.seconds,n.minutes=e/i.minutes,n.hours=e/i.hours,n.days=e/i.days,n},t.prototype._elapsedTimeToRunTime=function(t){var n,e,r,s;e=0,r=0;for(n in t){if(s=t[n],++e>1)throw new Error("Bad arguments supplied (too many properties).");if(!(p.call(o,n)>=0))throw new Error("Bad arguments supplied (wrong property).");r=i[n]*s}return r},t.prototype._clockTimeToRunTime=function(t){var n,e,r;e=0;for(n in t){if(r=t[n],!(p.call(o,n)>=0))throw new Error("Bad arguments supplied (wrong property).");e+=i[n]*r}return e},t.prototype._getInfo=function(){var t,n,e,r,o;if(r=this.running?this.time.run+u()-this.time.start:this.time.run,n=this._runTimeToElapsedTime(r),t=this._runTimeToClockTime(r),this.settings.floor)for(e in n)o=n[e],n=Math.floor(o);if(this.settings.pad)for(e in t)o=t[e],o=this._pad(o,this.settings.pad);return{time:{elapsed:n,clock:t},count:this.count}},t.prototype._adjustRunTime=function(t,n){switch(t){case"set":this.time.run=n;break;case"add":this.time.run+=n;break;case"subtract":this.time.run-=n;break;default:throw new Error("Bad arguments supplied (invalid operation).")}return this.settings.allowNegative?void 0:this.time.run=Math.max(this.time.run,0)},t.prototype._adjustCount=function(t,n){var e,r;for(e in n){if(r=n[e],"start"!==e&&"stop"!==e&&"reset"!==e)throw new Error("Bad arguments supplied (wrong property).");if(!this._isInt(r))throw new Error("Bad arguments supplied (count value is not an integer).");switch(t){case"set":this.count[e]=r;break;case"add":this.count[e]+=r;break;case"subtract":this.count[e]-=r;break;default:throw new Error("Bad arguments supplied (invalid operation).")}this.settings.allowNegative||(this.count[e]=Math.max(this.count[e],0))}},t.prototype._adjustInfo=function(t,n){if("object"!==this._type(n))throw new Error("Bad arguments supplied (wrong type).");if(null!=n.elapsed&&null!=n.clock)throw new Error("Bad arguments supplied (both elapsed and clock times).");return null!=n.elapsed&&this._adjustRunTime(t,this._elapsedTimeToRunTime(n.elapsed)),null!=n.clock&&this._adjustRunTime(t,this._clockTimeToRunTime(n.clock)),null!=n.count?this._adjustCount(t,n.count):void 0},t.prototype._loop=function(){return this.pulse=l(this._loop),this._step()},t.prototype._step=function(){return this.settings.step(this._getInfo())},t.prototype.start=function(t){return null==t&&(t=this.settings.start),this.running||(this.count.start++,this.running=!0,this.time.start=u(),this._loop(),"function"==typeof t&&t(this._getInfo())),this},t.prototype.stop=function(t){return null==t&&(t=this.settings.stop),this.running&&(l.cancel(this.pulse),this.time.stop=u(),this.time.run+=this.time.stop-this.time.start,this.count.stop++,this.running=!1,this._step(),"function"==typeof t&&t(this._getInfo())),this},t.prototype.reset=function(t,n){var e,r,o,i;if(null==t&&(t=this.settings.reset),this.time.run>0&&(e=!0,this.time.run=0,this.count.reset++,this.time.start=u(),this.time.stop=null),n){i=this.count;for(r in i)if(o=i[r],o>0){e=!0,this.count.start=0,this.count.stop=0,this.count.reset=0;break}}if(null!=t&&e){if("function"!==this._type(t))throw new Error("Bad arguments supplied (wrong type).");"function"==typeof t&&t(this._getInfo())}return this},t.prototype.info=function(t,n){return null==n&&(n=this.settings.info),null!=t?(this._adjustInfo("set",t),"function"==typeof n&&n(this._getInfo()),this):this._getInfo()},t.prototype.add=function(t,n){if(null==n&&(n=this.settings.add),null!=t)return this._adjustInfo("add",t),"function"==typeof n&&n(this._getInfo()),this;throw new Error("No arguments supplied.")},t.prototype.subtract=function(t,n){if(null==n&&(n=this.settings.subtract),null!=t)return this._adjustInfo("subtract",t),"function"==typeof n&&n(this._getInfo()),this;throw new Error("No arguments supplied.")},t.prototype.when=function(t,n){if(null==n&&(n=this.settings.when),null!=t){if(null!=n)return this;throw new Error("No callback supplied.")}throw new Error("No arguments supplied.")},t.prototype.every=function(t,n){if(null==n&&(n=this.settings.every),null!=t){if(null!=n)return this;throw new Error("No callback supplied.")}throw new Error("No arguments supplied.")},t.prototype["while"]=function(t,n,e){if(null==e&&(e=this.settings["while"]),null!=t){if(null!=n){if(null!=e)return this;throw new Error("No callback supplied.")}throw new Error("No end time supplied.")}throw new Error("No arguments supplied.")},t.prototype.during=function(t,n,e,r){if(null==e&&(e=this.settings.duringStart),null==r&&(r=this.settings.duringEnd),null!=t){if(null!=n){if(null!=e){if(null!=r)return this;throw new Error("No end callback supplied.")}throw new Error("No start callback supplied.")}throw new Error("No end time supplied.")}throw new Error("No arguments supplied.")},t.prototype.beginning=function(t,n){if(null==n&&(n=this.settings.beginning),null!=t){if(null!=n)return this.during(t,1/0,n,s),this;throw new Error("No start callback supplied.")}throw new Error("No arguments supplied.")},t.prototype.ending=function(t,n){if(null==n&&(n=this.settings.ending),null!=t){if(null!=n)return this;throw new Error("No end callback supplied.")}throw new Error("No arguments supplied.")},t}(),n.exports=r}).call(this)}).call(this,t("1YiZ5S"))},{"1YiZ5S":1,"performance-now":2,raf:3}]},{},[5])(5)});